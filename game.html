<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>[ Game ] ‚Äî Snake.exe // Unlock Contact</title>
  <meta name="description" content="Play the cybersecurity Snake game. Score 10 to unlock the contact form." />
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
</head>
<body>

  <a class="skip-link" href="#main">Skip to content</a>

  <!-- ‚îÄ‚îÄ Sticky Header ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <header class="site-header" role="banner">
    <div class="container nav-inner">

      <a href="index.html" class="nav-logo" aria-label="Home">
        <span class="logo-bracket">[</span>
        <span>dev</span><span class="logo-dot">.</span><span>sec</span>
        <span class="logo-bracket">]</span>
      </a>

      <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="nav-links">
        <span></span><span></span><span></span>
      </button>

      <nav aria-label="Main navigation">
        <ul class="nav-links" id="nav-links" role="list">
          <li><a href="index.html">Home</a></li>
          <li><a href="game.html">Game</a></li>
          <li>
            <a href="contact.html" class="nav-contact-link disabled" aria-describedby="contact-status">
              <span class="nav-contact-link">Contact</span>
              <span class="lock-badge locked" id="contact-status" aria-live="polite">locked</span>
            </a>
          </li>
        </ul>
      </nav>

    </div>
  </header>

  <!-- ‚îÄ‚îÄ Main ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <main id="main" class="game-page">
    <div class="container">

      <!-- Page Header -->
      <div class="game-header fade-in">
        <p class="section-label">Mini-game</p>
        <h1 style="margin-bottom: var(--space-2);">snake<span style="color:var(--cyan)">.exe</span></h1>
        <p style="color: var(--text-secondary); font-size: 0.9rem; max-width: 460px; margin: 0 auto;">
          Navigate the network. Consume the viruses. Score <strong style="color:var(--gold);">10 points</strong> to unlock the contact form.
        </p>
      </div>

      <!-- Game Arena -->
      <div class="game-arena">

        <!-- Score bar -->
        <div class="score-bar" role="status" aria-live="polite" aria-label="Game score">
          <span>SCORE</span>
          <span class="score-value" id="scoreValue">0</span>
          <span>/</span>
          <span style="color: var(--gold);">10</span>
        </div>

        <!-- Canvas -->
        <div class="game-canvas-wrap">
          <canvas id="gameCanvas" width="400" height="400" tabindex="0" aria-label="Snake game canvas ‚Äî use arrow keys or WASD to play"></canvas>

          <!-- Overlay: start / game over / win -->
          <div class="game-overlay" id="gameOverlay" role="dialog" aria-modal="false" aria-labelledby="overlayTitle">
            <p class="overlay-title" id="overlayTitle">[ SNAKE.EXE ]</p>
            <p class="overlay-subtitle" id="overlaySubtitle">Press [SPACE], [‚Üë] or tap to start</p>
            <button class="btn btn-primary" onclick="document.dispatchEvent(new KeyboardEvent('keydown',{key:' ',bubbles:true}))" style="margin-top: var(--space-2);">
              ‚ñ∂ Start
            </button>
          </div>
        </div>

        <!-- Touch controls (shown on mobile via CSS media query) -->
        <div class="touch-controls" aria-label="On-screen directional controls" role="group">
          <div class="touch-row">
            <button class="touch-btn" id="btnUp" aria-label="Move up">‚ñ≤</button>
          </div>
          <div class="touch-row">
            <button class="touch-btn" id="btnLeft" aria-label="Move left">‚óÄ</button>
            <button class="touch-btn" id="btnDown" aria-label="Move down">‚ñº</button>
            <button class="touch-btn" id="btnRight" aria-label="Move right">‚ñ∂</button>
          </div>
        </div>

        <p class="game-status">
          Keyboard: <kbd style="font-family:var(--font-mono); color:var(--cyan);">‚Üë ‚Üì ‚Üê ‚Üí</kbd> or
          <kbd style="font-family:var(--font-mono); color:var(--cyan);">W A S D</kbd> &nbsp;¬∑&nbsp;
          <kbd style="font-family:var(--font-mono); color:var(--cyan);">SPACE</kbd> to restart
        </p>

      </div>

      <div class="divider"></div>

      <!-- ‚îÄ‚îÄ Contact Gate ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
      <section class="contact-gate" aria-labelledby="contact-gate-title">

        <!-- Locked state -->
        <div id="contactLocked" class="contact-locked-msg" aria-live="polite">
          <svg class="lock-icon-large" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          <p class="locked-text" id="contact-gate-title">Score <span style="color:var(--gold);font-weight:700;">10</span> to unlock contact</p>
          <div class="score-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="10" aria-label="Score progress">
            <div class="score-progress-fill" id="scoreProgressFill"></div>
          </div>
          <p style="font-size:0.78rem; color: var(--text-muted); font-family: var(--font-mono);">
            Current score: <span id="scoreProgressLabel">0</span> / 10
          </p>
        </div>

        <!-- Unlocked: contact form -->
        <div class="contact-form-section" id="contactFormSection" aria-labelledby="contact-gate-title">
          <div style="text-align:center; margin-bottom: var(--space-8);">
            <span style="font-size:2rem;">üîì</span>
            <h2 id="contact-gate-title" style="color: var(--green); margin-top: var(--space-2);">Contact Unlocked</h2>
            <p style="color: var(--text-secondary); font-size: 0.9rem;">Well played. Send a message below.</p>
          </div>
          <!-- Form is included inline ‚Äî shared component -->
          <div id="contactFormInline"></div>
        </div>

      </section>

    </div>
  </main>

  <!-- ‚îÄ‚îÄ Footer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <footer class="site-footer" role="contentinfo">
    <div class="container footer-inner">
      <p class="footer-copy">&copy; 2025 ‚Äî Built with curiosity &amp; caffeine.</p>
      <ul class="footer-links" aria-label="Social links">
        <li>
          <a href="https://github.com/" target="_blank" rel="noopener noreferrer" aria-label="GitHub profile">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/></svg>
            GitHub
          </a>
        </li>
        <li>
          <a href="https://linkedin.com/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn profile">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
            LinkedIn
          </a>
        </li>
      </ul>
    </div>
  </footer>

  <script src="app.js"></script>
  <script>
    // Contact form logic ‚Äî defined before use
    function initContactForm(formId) {
      const form = document.getElementById(formId);
      if (!form) return;

      form.addEventListener('submit', e => {
        e.preventDefault();
        let valid = true;

        const name = form.querySelector('[name="name"]');
        const email = form.querySelector('[name="email"]');
        const message = form.querySelector('[name="message"]');

        // Reset error states
        [name, email, message].forEach(f => f.classList.remove('error'));
        form.querySelectorAll('.form-error').forEach(el => el.classList.remove('visible'));
        form.querySelector('.form-success')?.classList.remove('visible');

        // Validate
        if (!name.value.trim()) {
          name.classList.add('error');
          form.querySelector('#nameError')?.classList.add('visible');
          valid = false;
        }
        const emailRe = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRe.test(email.value.trim())) {
          email.classList.add('error');
          form.querySelector('#emailError')?.classList.add('visible');
          valid = false;
        }
        if (!message.value.trim()) {
          message.classList.add('error');
          form.querySelector('#messageError')?.classList.add('visible');
          valid = false;
        }

        if (valid) {
          form.reset();
          form.querySelector('.form-success')?.classList.add('visible');
        } else {
          form.querySelector('.error')?.focus();
        }
      });
    }

    // Inject contact form into the unlocked section
    document.getElementById('contactFormInline').innerHTML = `
      <form id="contactForm" novalidate>
        <div class="form-group">
          <label class="form-label" for="contactName">Name</label>
          <input class="form-input" type="text" id="contactName" name="name" autocomplete="name" placeholder="Your name" required aria-required="true" />
          <span class="form-error" id="nameError" role="alert">Please enter your name.</span>
        </div>
        <div class="form-group">
          <label class="form-label" for="contactEmail">Email</label>
          <input class="form-input" type="email" id="contactEmail" name="email" autocomplete="email" placeholder="you@example.com" required aria-required="true" />
          <span class="form-error" id="emailError" role="alert">Please enter a valid email address.</span>
        </div>
        <div class="form-group">
          <label class="form-label" for="contactMessage">Message</label>
          <textarea class="form-textarea" id="contactMessage" name="message" placeholder="Your message‚Ä¶" required aria-required="true"></textarea>
          <span class="form-error" id="messageError" role="alert">Please enter a message.</span>
        </div>
        <button type="submit" class="btn btn-primary" style="width:100%; justify-content:center;">
          Send Message ‚Üí
        </button>
        <div class="form-success" id="formSuccess" role="alert">
          ‚úì Message sent! I'll get back to you soon.
        </div>
      </form>
    `;
    initContactForm('contactForm');
  </script>
  <script src="game.js"></script>
</body>
</html>
